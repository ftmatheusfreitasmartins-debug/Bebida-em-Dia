<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta
      name="description"
      content="Sistema de gerenciamento de rodízio de bebidas - Bebida em Dia"
    />
    <meta name="keywords" content="bebida, rodízio, pagamento, gestão, controle" />
    <meta name="author" content="Bebida em Dia Team" />

    <title>Bebida em Dia - Sistema de Rodízio</title>

    <link rel="icon" type="image/x-icon" href="assets/coca-logo.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body data-theme="dark">
    <div class="app-container">
      <header class="app-header header-simplificado">
        <div class="header-left">
          <div
            class="header-logo"
            role="button"
            aria-label="Ir para o início"
            onclick="location.href='/'"
          >
            <img class="brand-logo" src="assets/coca-logo.png" alt="Logo" />
            <div class="brand-text">
              <div class="brand-title">Bebida em Dia</div>
              <div class="brand-subtitle">Rodízio organizado</div>
            </div>
          </div>
        </div>

        <div class="header-right header-actions-right">
          <button
            class="theme-btn"
            id="openThemeModal"
            type="button"
            aria-label="Abrir temas"
            title="Tema"
          >
            <i class="fas fa-palette"></i>
          </button>

          <div class="header-profile" title="Perfil atual">
            <div class="profile-avatar" id="profileAvatar" aria-label="Avatar do perfil">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="profile-info">
              <h3 id="personName">Visitante</h3>
              <p id="profileStatus">Selecione um perfil</p>
            </div>
          </div>

          <button
            class="logout-btn"
            id="logoutBtn"
            aria-label="Trocar/Sair do perfil"
            title="Trocar perfil"
          >
            <i class="fas fa-right-from-bracket"></i>
          </button>
        </div>
      </header>

      <main class="main-content home-layout">
        <!-- HERO -->
        <section class="panel hero-panel">
          <div class="hero-content">
            <div class="hero-text">
              <h1 class="hero-title">Registrar bebida do dia</h1>
              <p class="hero-subtitle">
                Um clique e pronto. O sistema atualiza ranking, histórico e calendário automaticamente.
              </p>
            </div>

            <div class="hero-actions">
              <button class="btn btn-cta" id="togglePaidBtn" disabled aria-label="Registrar bebida do dia">
                <i class="fas fa-glass-water"></i>
                <span id="toggleButtonText">Selecione um perfil para continuar</span>
              </button>

              <a href="admin" class="btn btn-outline btn-cta" aria-label="Acessar painel administrativo">
                <i class="fas fa-user-shield"></i>
                Painel administrativo
              </a>
            </div>
          </div>
        </section>

        <!-- HOJE -->
        <section class="panel">
          <div class="panel-header today-header">
            <div>
              <h2 class="panel-title">Hoje</h2>
              <p class="panel-subtitle" id="todayDate">Carregando...</p>
            </div>

            <div class="today-chip" id="todayChip">
              <i class="fas fa-circle-info"></i>
              <span>Selecione um perfil</span>
            </div>
          </div>

          <div class="today-grid">
            <div class="today-card">
              <div class="today-card-icon">
                <i class="fas fa-check"></i>
              </div>
              <div class="today-card-body">
                <div class="today-card-value" id="paidPeopleCount">...</div>
                <div class="today-card-label">Bebida registrada hoje</div>
              </div>
            </div>

            <div class="today-card">
              <div class="today-card-icon">
                <i class="fas fa-rotate"></i>
              </div>
              <div class="today-card-body">
                <div class="today-card-value" id="nextPersonName">...</div>
                <div class="today-card-label">Próxima pessoa</div>
              </div>
            </div>

            <div class="today-card">
              <div class="today-card-icon">
                <i class="fas fa-calendar-day"></i>
              </div>
              <div class="today-card-body">
                <div class="today-card-value" id="dayOfTheYear">...</div>
                <div class="today-card-label">Dia do ano</div>
              </div>
            </div>
          </div>
        </section>

        <!-- RANKING (NOVO) -->
        <section class="panel" id="rankingPanel">
          <div class="panel-header">
            <h2 class="panel-title">Ranking</h2>
            <i class="fas fa-trophy panel-icon"></i>
          </div>

          <ul class="list" id="rankingList">
            <li class="list-item">
              <span class="person">Carregando...</span>
              <span class="score">...</span>
            </li>
          </ul>
        </section>

        <!-- HISTÓRICO -->
        <section class="panel">
          <div class="panel-header">
            <h2 class="panel-title">Histórico</h2>
            <i class="fas fa-history panel-icon"></i>
          </div>

          <button
            class="history-toggle"
            id="historyToggle"
            type="button"
            data-count="0"
            aria-label="Abrir histórico pessoal"
          >
            <span>Ver histórico pessoal</span>
            <i class="fas fa-chevron-down"></i>
          </button>

          <div class="history-content" id="historyContent">
            <ul class="list" id="paidHistory">
              <li class="list-item"><span>Selecione um perfil para ver o histórico</span></li>
            </ul>
          </div>
        </section>

        <!-- CALENDÁRIO -->
        <section class="panel">
          <div class="panel-header">
            <h2 class="panel-title">Calendário</h2>
            <i class="fas fa-calendar-alt panel-icon"></i>
          </div>

          <div class="calendar-nav calendar-nav-premium">
            <button class="btn small-btn ghost" id="prevMonthBtn" aria-label="Mês anterior">
              <i class="fas fa-chevron-left"></i>
            </button>

            <div class="calendar-title">
              <h2 id="monthYear">Carregando...</h2>
              <small>Pagamentos do mês</small>
            </div>

            <button class="btn small-btn ghost" id="nextMonthBtn" aria-label="Próximo mês">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>

          <div class="calendar-grid" id="calendarGrid">
            <div class="loading-spinner">
              <div class="spinner"></div>
              <span>Carregando calendário...</span>
            </div>
          </div>
        </section>
      </main>

      <!-- Modal de Perfil -->
      <div class="modal-backdrop hidden" id="selectPersonModal">
        <div class="modal">
          <div class="modal-header">
            <h2 class="modal-title">Selecione seu Perfil</h2>
            <button class="close-btn" id="closePersonModal" aria-label="Fechar modal">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-content">
            <p class="modal-desc">
              Escolha seu perfil para começar a usar o Bebida em Dia e registrar suas bebidas.
            </p>

            <!-- Busca (NOVO) -->
            <div class="profile-search">
              <i class="fas fa-magnifying-glass"></i>
              <input
                id="personSearchInput"
                class="form-input"
                type="text"
                placeholder="Buscar perfil..."
                autocomplete="off"
              />
            </div>

            <div id="personSelectModalList">
              <div class="loading-spinner">
                <div class="spinner"></div>
                <span>Carregando perfis...</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal de Tema -->
      <div class="modal-backdrop hidden" id="themeModal">
        <div class="modal">
          <div class="modal-header">
            <h2 class="modal-title">Temas</h2>
            <button class="close-btn" id="closeThemeModal" aria-label="Fechar temas">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-content">
            <p class="modal-desc">Escolha um tema para a interface (fica salvo no navegador).</p>
            <div id="themeOptions"></div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <p>2025 Bebida em Dia. Sistema de gerenciamento da coca.</p>
        <p>Desenvolvido por Matheus Martins</p>
      </footer>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
